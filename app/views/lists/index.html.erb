<%= render :partial => "layouts/page_header", :locals => { :header => "List Index" } %>

<div id="content">
  <% if @lists.length == 0 %>
    <p>You don't have any lists.</p>
  <% else %>
    <% @lists.each do |list| %>
      <h3><%= list.name %> <%= link_to 'delete', list, :confirm => "Are you sure?", :method => :delete %></h3>
      <table>
        <tr>
          <th>Labels</th>
          <th>Item</th>
          <th>Edit</th>
        </tr>
        <% list.items.each do |item| %>
          <tr>
            <td class="label">
              <ul>
                <% item.labels.each do |label| %>
                  <li><span><%= label.name %> <%= link_to '×', "/lists/#{list.id}/items/#{item.id}/remove_label/#{label.id}" %></span></li>
                <% end %>
              </ul>
            </td>
            <td class="name"><%= item.name %></td>
            <td class="edit"><%= link_to 'e', edit_list_item_path(list, item) %> <%= link_to '×', list_item_path(list, item), :confirm => "Are you sure?", :method => :delete %></td>
          </tr>
        <% end %>
        <tr>
          <td class="label"></td>
          <td class="name"><%= link_to 'new item', new_list_item_path(list) %></td>
          <td class="edit"></td>
        </tr>
      </table>
      <hr/>
    <% end %>
  <% end %>
  <%= link_to 'Make a new list.', new_list_path %>
</div>
